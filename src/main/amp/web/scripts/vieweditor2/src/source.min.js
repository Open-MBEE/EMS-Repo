/*! grunt-template 2013-12-16 15:08:03 */
window.ViewEditor=Ember.Application.create(),ViewEditor.ApplicationAdapter=DS.FixtureAdapter.extend(),app.backend=function(){var a=function(a,b,c){$.ajax(a).done(function(){app.dispatcher.trigger("backend-success",b)}).fail(function(a){return a&&a.status&&200===a.status?(app.dispatcher.trigger("backend-error",c),void 0):(console&&console.log&&console.log("ajax error:",a),app.dispatcher.trigger("backend-error",c),void 0)})},b=function(b){a({type:"GET",url:b,contentType:"application/json; charset=UTF-8",success:function(a){if(a.constructor===String)try{a=JSON.parse(a)}catch(b){a={},app.dispatcher.trigger("backend-error","Error parsing json data.  If running in development you will need to specify ?test_mdid={mdid} as a url paramater.")}app.dispatcher.trigger("backend-data-ready",a)}},"Success downloaded page data","Error downloading page data")};return app.dispatcher.on("application-start",function(){var a="",c=$.url().param("test_mdid");a=void 0!==c?"../test_data/"+c+".json":$.url().attr("source")+"?format=json",console.log("Loading data from: "+a),b(a)}),{loadDataFromURL:b}}(),app.datamodel=function(){var a={},b=null,c=null;app.dispatcher.on("backend-data-ready",function(a){d(a),app.dispatcher.trigger("datamodel-ready")});var d=function(d){user=d.user,isSnapshot=d.snapshot,c=d.user,_.each(d.views,function(b){a[b.mdid]=e(b,d.view2view[b.mdid])}),b=a[d.rootView],_.each(d.elements,function(b){a[b.mdid]=e(b)})},e=function(a,b){var c=[];return _.each(a.contains,function(a){"Paragraph"===a.type?c.push(f(a)):"List"===a.type?c.push(g(a)):"Table"===a.type?c.push(h(a)):app.dispatcher.trigger("datamodel-error","Unsupported view.contains element of type "+a.type+" expected Paragraph, List, or Table")}),{getViewAttr:function(b){return a[b]},getChildIds:function(){return b},getContent:function(){return c}}},f=function(a){return{getType:function(){return a.type},getValue:function(){return"text"===a.source?text:void 0}}},g=function(){return{getType:function(){return paraData.type}}},h=function(){return{getType:function(){return paraData.type}}};return{getRootView:function(){return b},isSnapshot:function(){return isSnapshot},getUsername:function(){return c}}}(),ViewEditor.Router.map(function(){this.resource("view",{path:"/"})}),ViewEditor.ViewRoute=Ember.Route.extend({model:function(){return this.store.find("view")}}),ViewEditor.ElementRoute=Ember.Route.extend({model:function(){return this.store.find("element")}});