<webscript> 
  <shortname>Post View</shortname> 
  <description>Handles posting of model from magicdraw
  	use cases: 
  		- initialize model package hierarchy
  		- post elements inside packages
  		- post relationships between elements
  		
   the createRoots flag determines whether the root should be created at the project root if not found
   the goal is to reuse the same json structure for any load or update model scenario
   envisioned use case for initial model load:
   		1. project is initialized already
   		2. the model package structure is posted - here the root elements are the root packages and all elements being packages, createRoots is true
   		3. the rest of the elements are posted, either at each package or all packages, the root elements determine where to start but createRoots is false
   			(the roots here are not necessarily root packages of the model) - this allows model load to be done incrementally
   		4. relationships can be posted separately or with 3, handle relationships last
   	use case for updating model:
   		1. there are some changes on magicdraw - new elements or moved elements within a project
   		2. roots determine where to start - update model element hierarchy, createRoots is false, if any element besides root is not found, create it
   		3. for updates it's possible to post the whole model, follow the same order of ops as model load
  	it may be possible for the initial load json to include everything, and we just split them into smaller transactions on server side
  	
  	Additional arguments can be toggled if toggleChoice=true to simply tell Alfresco which parts of the model to load. e.g. load only elements if
  	toggleChoice=true&amp;elements=true
  </description>
  <url>/javawebscripts/sites/{siteName}/projects/{projectId}/model?createRoots={createRoots?}&amp;hierarchy={hierarchy?}&amp;elements={elements?}&amp;relationshipElements={relationshipElements?}&amp;propertyTypes={propertyTypes?}&amp;elementValues={elementValues?}&amp;roots={roots?}&amp;toggleChoices{toggleChoices?}</url>
  <format default="json">any</format> 
  <authentication>user</authentication> 
  <transaction allow="readwrite">required</transaction>
  <family>EMS Java Webscripts</family>
  <args>
  	<arg>
  		<name>posted content</name>
  		<description>The request body of the post as json:
  		{
  			"roots": [elementId, ...],
  			"elementHierarchy": {
  				elementId: [childElementId, ...],
  				...
  			},
  			"elements": {
  			//added properties of elements so the element json object should have all information about that element
  			//in terms of data interchange, this seems to be a better way for clients to process information then 
  			//having "relationships" in a separate object, since the relationships in alfresco are implementation details
  			//for properties that are really first class to the element
  				elementId: {
  					"id": elementId,
  					"type": "Package" | "Property" | "Element" | 
  							"Dependency" | "Generalization" | "DirectedRelationship" | 
  							"Conform" | "Expose" | "Viewpoint",
  					"name": name,
  					"documentation": documentation,
  					"owner": elementId/null,
  					"isView": true|false,
  					"isProduct": true|false,  (isDocument?)
  					
  					//************** if type is "Property" ******/
  					"propertyType": elementId/null;
  					"isDerived": true|false, 
  					"isSlot": true|false, 
  					"value": [?], (based on valueType)
  					"valueType": "LiteralBoolean" | "LiteralInteger" | "LiteralString" | 
  							"LiteralReal" | "ElementValue" | "Expression",
  					
  					//*************** if type is subtype of DirectedRelationship (Generalization/Expose/Conform/Dependency) ***/
  					"source": elementId,
  					"target": elementId
  				},
  				...
  			}
  			"relationships": {
  			//if element object have these information already, would this still be needed? the code can build up this object 
  			//internally as it goes through the elements to preserve the udpate order
  				"relationshipElements": {
  					relationshipElementId: {"source": sourceElementId, "target": targetElementId},
  					...
  				},
  				"propertyTypes": {
  					propertyElementId: typeElementId, //for Property to the property type
  					...
  				},
  				"elementValues": {
  					propertyElementId: [elementId], //for property with ElementValue as value types, the value is a noderef
  					...
  				}
  			}
  		}
  		</description>
  	</arg>
  </args>
</webscript>